pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
oldpos={x=64, y=64}
pos={x=64,y=64}
radius=3
speed=3

black=0
blue=1
white=7
orange=9

function _update()
	oldpos={x=pos.x, y=pos.y}
	local dx=0
	local dy=0
	local m=speed
	if (btn(⬅️)) then dx-=1 end
	if (btn(➡️)) then dx+=1 end
	if (btn(⬆️)) then dy-=1 	end
	if (btn(⬇️)) then dy+=1 end
	if (dx~=0 and dy~=0) then
		m=flr(m*0.707)
	end
	pos.x=clamp(pos.x+m*dx,3,124)
	pos.y=clamp(pos.y+m*dy,3,124)
end

function clamp(value,vmin,vmax)
	if (value>vmax) then
		return vmax
	elseif (value<vmin) then
		return vmin
	else
		return value
	end
end

function _draw()
	rectfill(0,0,127,127,blue)
	print("x,y:"..pos.x..","..pos.y,4,4,white)
	circfill(pos.x,pos.y,radius,orange)
	local dx=pos.x-oldpos.x
	local dy=pos.y-oldpos.y
	--print("dx,dy:"..dx..","..dy,4,10,white)	
	line(pos.x,pos.y,pos.x+dx*speed,pos.y+dy*speed,white)
end
__gfx__
00000000002aa000000aa20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000002aaaa0000aaaa2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007002a4aa4a00a4aa4a200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000aaaaaaaaaaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000aa4444aaaa4444aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007002aa44aa00aa44aa200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000002aaaa0000aaaa2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000002aa000000aa20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

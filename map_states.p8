pico-8 cartridge // http://www.pico-8.com
version 23
__lua__
function _init()
	state={
		{0,1,0},
		{1,1,0},
		{0,1,1},
	}
	n=-state[2][2]	
end

function _update()
	if btnp(❎) then
		local s=state[2][2]>0
		n=-state[2][2]
		state_visit(function(r,c)
			n+=state[r][c]
		end)
		local ns=(s and n>1 and n<4) or (not s and n==3)
		state[2][2]=ns and 1 or 0
	end	
end

function _draw()
	cls()
	state_visit(draw_cell)
end

function state_visit(visitor)
	print("n:"..n)
	for r=1,3 do
		for c=1,3 do
			visitor(r,c)	
		end
	end	
end

function draw_cell(r,c)
	spr(state[r][c]==0 and 1 or 2,c*7,r*7)
end
__gfx__
00000000aaaaaaaaaaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000a000000aa000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700a000000aa00cc00a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000a000000aa0cccc0a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000a000000aa00cc00a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700a000000aa0c00c0a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000a000000aa000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000aaaaaaaaaaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

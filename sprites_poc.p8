pico-8 cartridge // http://www.pico-8.com
version 26
__lua__
subm={
	x=24,y=24,flipx=false,by=0.05
}
bubbles={}
function anim_subm()
	while(true) do	 
		for i=0,1,0.02 do
			subm.x+=0.025*cos(i+0.1)
			subm.y+=0.050*sin(i)
			yield()
		end
	end
end
subm_cor=cocreate(anim_subm)
btimer=0
::_::
--coroutine
if subm_cor and costatus(subm_cor)~='dead' then
	coresume(subm_cor)
else
	subm_cor=nil
end

--updates
local dx,dy,spd=0,0,3/8
if (btn(0)) dx-=spd
if (btn(1)) dx+=spd
if (btn(2)) dy-=spd
if (btn(3)) dy+=spd

dx*=0.7 dy*=0.7

subm.x+=dx
subm.y+=dy

--flip sprite
if (dx~=0) subm.flipx=dx>0

btimer-=1
if btimer<0 then 
	local d=subm.flipx and -4 or 7
	add(bubbles,{x=subm.x*8+d,y=subm.y*8+4,age=30,si=flr(rnd(3)+9)})
	
	local bs=25
	if (dx~=0 or dy~=0) bs=2
	btimer=rnd(3)+bs
end


--draw submarine
cls(12)
local room_x,room_y=flr(subm.x/16),flr(subm.y/16)
--camera(room_x*128,room_y*128)
local camx,camy=subm.x*8-60,subm.y*8-60
camx=mid(0,camx,896)
camy=mid(0,camy,896)
camera(camx,camy)
map(16,16)
palt(0,false)
palt(11,true)
spr(2,subm.x*8-4,subm.y*8-4,1,1,subm.flipx)
palt(0,true)
palt(11,false)

--draw bubbles
for b in all(bubbles) do
	b.age-=1
	b.y-=0.8
	spr(b.si,b.x-4,b.y-8)
	--print("x:"..b.x,b.x+4,b.y-8)
	if (b.age<=0) del(bubbles,b)
end
	
flip()
goto _

__gfx__
0000000000ccccc0bbddbbbbbb88bbbb000000000000000000000000000000000000000006660000066600000600000000000000000000000000000000000000
000000000ccc9cccbbbdbbbbbbb8bbbb000000000000000000000000000000000000000060006000660660006060000000000000000000000000000000000000
0070070000cccc0cbbad9bbbbb888bbb000000000000000000000000000000000000000060006000600060000600000000000000000000000000000000000000
000770004ccc5fffbaaaaab9b88888b8000000000000000000000000000000000000000060006000660660000000000000000000000000000000000000000000
00077000000cc440adadada98d8d8d88000000000000000000000000000000000000000006660000066600000000000000000000000000000000000000000000
0070070060c0cff59aaaaaa988888888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000070c050b9aaa9b9b88888b8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000008706ebb999bbbbb888bbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000ccccccc7555555550000b00011111111445444440000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000cccccccc33333333000bb00011111111454444540000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000c7cccccc34394343000b000015111111444444440000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000cccccccc9499494900b3000011111111444444440000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000cc7ccccc444444440b3000b011111111454444440000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000cccccccc444444440b30003b11111111445444540000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000cccccccc4444444400b000b011111511444444440000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000cccccc7c44444444000b0b0011111111444444440000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000009191919191919191c1c1c1c1c1c1c1c1c1c191c191c1c191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c191c1c1c1c1c1c1
c1c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000009191919191919191c1c1c1c1c1c1c1c1c1c1c1c1c1c191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c19191c1c1c1c1c1c191c1c1c1c1c1c1c1
c1c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000c1c1c1c1c1c1c1c1c1c1c191c191c1c1c191c1c1c1c191c1c1c1c191c1c191c191c19191c191c1c1c1c1c1c1c1c1c1c1c1c1c1c1
c1c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000c1c1c1c1c1c1c1c1c19191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c191c1c1c1c191c1c1c1c1c1c1c1c1
c1c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000c1c1c1c1c1c1c19191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c191c1c1c1c1c1c1c1c1c1
c1c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000091919191c191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c19191c1c1c1c1c1c1c1c1c1c1c1c1
c1c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000c1c19191c191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c191c191c1c1c1c1c1c1c1c1c1c1
c1c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000c1c1c1c1c1c1c191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c19191c1c1c1c1c1c1c1c1c1c1
c1c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000c1c1c1c1c1c1c1c1c1c191c1c191c19191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c19191c1c1c1c1c1c1c1c1c1c1
c1c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1919191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1
c1c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1
c1c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000c1b1c1c1b1b1c1c1c1c1b1c1c1b1b1c1b1c1c1c1c1c1b1c1c1c1c1b1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1
c1c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1c1c1c1c1c1c1c1c1c1c1c1b1c1c1c1c1b1c1c1b1c1c1b1
c1c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1
a1a10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1d1
d1d10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191919191919191919191919191919191919191919191919191919191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000191919191919191919191919191c1c1c1c1c1c1c1c1c1c1c191c1c1c1c1c1c1c191c191919191919191919191900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191c1c1c1c191c191c1c1c1c1c1c1c191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c191c191c191c1c191c191c1c191c1c191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c19191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c19191c19191c1c1c1c1c1c1c1c1c1c1c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c19191c1c1c1c1c1c1c1c1c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191c1c1c1c1c1c1c19191c1c1c1c1c1c1c1c191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c19191c1c1c1c1c1c1c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000019191919191919191c1c1c1c1c1c1c1c1c191c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c1c191c1c1c1c1c1c1c1c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

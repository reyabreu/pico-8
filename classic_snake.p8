pico-8 cartridge // http://www.pico-8.com
version 26
__lua__
--classic snake	
function _init()
	game_over=false
	make_player()
	drop_fruit()
end

function _update()
	if (not game_over) move_player()
end

function _draw()
	cls()
	map()
	draw_player()
end

-->8
--player
function make_player()
	body={
		{5,8},
		{6,8},
		{7,8},
	}
	headx=body[#body][1]
	heady=body[#body][2]
	
	pdir=1 --0=⬅️ 1=➡️ 2=⬆️ 3=⬇️
	
	move_timer=10 --third of second
end

function move_player()	
	if (btnp(⬅️))	pdir=0
	if (btnp(➡️))	pdir=1
	if (btnp(⬆️))	pdir=2
	if (btnp(⬇️))	pdir=3
	
	if move_timer<0 then		
		if (pdir==0) headx-=1
		if (pdir==1) headx+=1
		if (pdir==2) heady-=1
		if (pdir==3) heady+=1
		
		add(body,{headx,heady})
		
		move_timer=10	
	end
	move_timer-=1
end

function draw_player()
	for seg in all(body) do
		local x,y=seg[1],seg[2]
		si=(x==headx and y==heady) and 1 or 2
		spr(si,x*8,y*8)
	end
	print(pdir,9,1)
end
-->8
--fruit
function drop_fruit()
	local valid_spot=false
	while not valid_spot do
		fruitx=flr(rnd(15))
		fruity=flr(rnd(15))
				
		if mget(fruitx,fruity)==16 then --grass
			valid_spot=true
			for seg in all(body) do
					if fruitx==seg[1] and fruity==seg[2] then
							valid_spot=false
							break
					end
			end
		end
	end
end

function draw_fruit()
	spr(18,fruitx*8,fruity*8)
end
__gfx__
00000000009aa70000aaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000009aaaa70049999a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007009a1aa1a74999999a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770009aaaaaaa4999999a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770009a1111aa4999999a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007009aa111aa4999999a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000009aaaaa0049999a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009999000044440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333377777733333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333766666653333bb3300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3343333376666665332b883300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
333333337666666532888e8300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333766666653288888300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333343766666653328883300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333433766666653332233300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333355555533333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1100000000000000000000000000001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1110101010101010101010101010101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1110101010101010101010101010101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1110101111101010101010111110101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1110101111101010101010111110101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1110101010101010101010101010101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1110101010101010101010101010101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1110101010101010101010101010101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1110101010101010101010101010101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1110101010101010101010101010101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1110101111101010101010111110101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1110101111101010101010111110101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1110101010101010101010101010101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1110101010101010101010101010101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

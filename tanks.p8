pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
-- combat
-- by reyabreu
tank={}

function _init()
	tank=maketank(64,64)
end

function _update()
	updatet(tank)
end

function _draw()
 cls(0)
	drawt(tank)
end
-->8
-- tanks
function maketank(x,y)
	local t={}
	t.x=x
	t.y=y
	t.s=1
	t.ls=1
	t.m=false
	t.t=0
	t.last=time()
	return t
end

function drawt(t)
 if t.m then
 	if time()-t.last>0.2 then
 	 t.ls=t.s
 	 if fget(t.ls) then
 	 	t.s+=2 
 	 else 
 	 	t.s-=2
 	 end
 		t.last=time()
 	end
 end
 spr(t.s,t.x-4,t.y-4) 
	spr(8,t.x-4,t.y-5)
end

function updatet(t)
	local dy,dx,tl,tr=0,0,0,0
	if (btn(0)) dx-=1
	if (btn(1)) dx+=1
	if (btn(2)) dy-=1
	if (btn(3)) dy+=1
	if (btn(s)) tl-=1
	if (btn(d)) tr+=1
	if dx~=0 or dy~=0 then
		t.m=true
	 t.s=getts(dx,dy)
	else
		t.m=false
	 t.s=t.ls
	end
	if dx~=0 and dy~=0 then
		dx*=0.8
		dy*=0.8
	end  
	t.x+=dx
	t.y+=dy
end

function getts(dx,dy)
	if (abs(dy)>0 and dx==0) return 1
	if (abs(dx)>0 and dy==0) return 2
	if (dx>0 and dy<0) return 17
	if (dx<0 and dy>0) return 17
	if (dx>0 and dy>0) return 18
	if (dx<0 and dy<0) return 18
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000003000030000000000000000000000000000000000000000000000000000000
00000000000000005151510000000000151515000000000000000000000000000003000003000000000000000000000000000000000000000000000000000000
00700700550005505555550015000510555555000000000000000000000000000003000000300000000000000000000000000000000000000000000000000000
00077000151115100111100055111550011110000000000000000000000000000033300000033330000000000000000000000000000000000000000000000000
00077000551115500111100015111510011110000000000000000000000000000333330000034430000000000000000000000000000000000000000000000000
00700700151115100111100055111550011110000000000000000000000000000334330000034230000000000000000000000000000000000000000000000000
00000000551115505555550015111510555555000000000000000000000000000342430000033330000000000000000000000000000000000000000000000000
00000000150005105151510055000550151515000000000000000000000000000033300000000000000000000000000000000000000000000000000000000000
00000000000150000005500000055000000510000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005500000000510000150000000055000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000015110000001155005511000000115100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000551111055011115115111105501111550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000501111515511110550111155151111050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000115500151100000011510055110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000051000055000000005500001500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000550000001500000051000000550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0001010000000000000000000000000000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

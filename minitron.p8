pico-8 cartridge // http://www.pico-8.com
version 20
__lua__
spd=1

function get_hitbox(bike)
 local bx,by,bw,bh=bike.x-1,bike.y-1,4,6
	return {x0=bx,y0=by,x1=bx+bw,y1=by+bh}
end

function has_collision(x,y,bike)
	h=get_hitbox(bike)
	return x>h.x0 and x<h.x1 and y>h.y0 and y<h.y1
end

function make_bike(x,y)
	local bike ={
		x=x+3,y=y+2,
		bp=false,
		d=0,trail={}
	}
	return bike
end

function _init()
	blue=make_bike(10,52)
end

function _update()
	local dx,dy,d=0,0,blue.d
	local bp=btn(0) or btn(1)
	if bp and not blue.bp then
		if (btn(0)) d=d<3 and d+1 or 0
		if (btn(1))	d=d>0 and d-1 or 3
		sfx(1)
	end
	blue.bp=bp
	blue.d=d
	if (d==0) dy-=1 
	if (d==1) dx-=1 	
	if (d==2) dy+=1 
	if (d==3) dx+=1
	blue.x=mid(8,blue.x+dx*spd,120)
	blue.y=mid(8,blue.y+dy*spd,120)	
end

function _draw()
 cls(5)
 local n=1+blue.d%2
	spr(n,blue.x,blue.y,1,1,blue.d==3,blue.d==2)
end
__gfx__
00000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001610000010110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000001000001611d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000001110000010110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000001d10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005c50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000dc7cd0000d505d500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000056c650005c6ccc500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000ccc000cc7cc11c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000005c1c50005c6ccc500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000dc1cd0000d505d500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000055c55000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
00020000184201842018420184301844018450184601846018460184701847018470184601845018430184301842018400184000c4000b4001a40023400204001c400194001f4002040020400214002940000000
000100000d7300f7301174013740157401675018750197501a7501b7601c7601b7601d7501d7401d7401d7301d7201d7201d7501d750000000000000000000000000000000000000000000000000000000000000
__music__
00 01424344
00 01424344


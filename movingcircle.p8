pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
-- circle mover
-- by reynaldo

function _init()
	make_player()
end

function _update()
	cls()
	move_player()
end

function _draw()
	draw_player()
	log_player()
end
-->8
--player
p={} --global

function make_player()
	p.x=64	p.y=64
	p.speed=5
	p.radius=2
	p.last={p.x,p.y}
end

function move_player()
 local dx=0
 local dy=0
 local k=1
 
	if (btn(⬅️)) dx-=1  
	if (btn(➡️)) dx+=1
	if (btn(⬆️)) dy-=1
	if (btn(⬇️)) dy+=1  
	
	if (dx~=0 and dy~=0) k=0.707
	
	p.last[0]=p.x	p.last[1]=p.y
	
	p.x=clamp(p.x+dx*flr(k*p.speed),p.radius,127-p.radius)
	p.y=clamp(p.y+dy*flr(k*p.speed),p.radius,127-p.radius)
end

function draw_player()
	circfill(p.x,p.y,p.radius,7)
end
-->8
--utilities
function clamp(value,vmin,vmax)
	if (value>vmax) return vmax
	if (value<vmin) return vmin
	return value
end

function log_player()
	print("x,y:"..p.x.." "..p.y,4,4,9)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
